{% extends "base.html" %}
{% block content %}
<h4>POS Billing</h4>

<form method="POST" id="billingForm">

<div class="row">

<!-- LEFT: PRODUCT LIST -->
<div class="col-md-6">
  <input type="text" id="searchProduct" class="form-control mb-2"
         placeholder="Search product">

  <div class="list-group" id="productList">
    {% for s in stocks %}
    <div class="list-group-item d-flex justify-content-between align-items-center product-item"
         data-name="{{ s.part_name|lower }}"
         data-brand="{{ s.brand|lower }}">
      <div>
        <b>{{ s.part_name }}</b><br>
        <small>{{ s.brand }} | Stock: {{ s.quantity }}</small>
      </div>
      <button type="button"
              class="btn btn-sm btn-success add-btn"
              data-id="{{ s.id }}"
              data-name="{{ s.part_name }}"
              data-price="{{ s.selling_price }}"
              data-profit="{{ s.selling_price - s.purchase_price }}"
              data-stock="{{ s.quantity }}">
        + Add
      </button>
    </div>
    {% endfor %}
  </div>
</div>

<!-- RIGHT: BILL CART -->
<div class="col-md-6">
  <h5>Customer</h5>
  <input class="form-control mb-2" name="mobile" placeholder="Mobile" required>
  <input class="form-control mb-2" name="name" placeholder="Name">
  <textarea class="form-control mb-2" name="address" placeholder="Address"></textarea>

  <h5 class="mt-3">Current Bill</h5>
  <table class="table table-bordered" id="cartTable">
    <tr>
      <th>Item</th>
      <th>Qty</th>
      <th>Total</th>
      <th></th>
    </tr>
  </table>

  <h5>Total: ₹<span id="totalAmount">0</span></h5>
  <h6>Profit: ₹<span id="totalProfit">0</span></h6>

  <button class="btn btn-primary w-100 mt-2">
    Generate Bill
  </button>
</div>

</div>
</form>
{% endblock %}
